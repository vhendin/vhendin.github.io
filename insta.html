<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Instagram Post Creator</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <!-- Preload some fonts to make them available for the canvas -->
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Playfair+Display:wght@700&family=Roboto+Mono:wght@400&family=Oswald:wght@500&display=swap" rel="stylesheet">
        <!-- Add Stockholm Type font -->
        <link href="https://font.stockholm.se/css/stockholm-type.css" rel="stylesheet">
        <style>
            body {
                font-family: 'Inter', sans-serif;
            }
            /* Custom styles for better UX */
            .canvas-container {
                width: 100%;
                max-width: 500px;
                /* Adjust as needed */
                aspect-ratio: 1 / 1;
            }
            canvas {
                cursor: default;
            }
            .loader {
                border: 4px solid #f3f3f3;
                border-top: 4px solid #3498db;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                animation: spin 2s linear infinite;
            }
            @keyframes spin {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>
    <body class="bg-gray-100 text-gray-800">

        <div class="container mx-auto p-4 md:p-8">
            <header class="text-center mb-8">
                <h1 class="text-3xl md:text-4xl font-bold text-gray-900">Instagram Post Creator</h1>
                <p class="text-gray-600 mt-2">Create beautiful, shareable images in a few clicks.</p>
            </header>

            <div class="flex flex-col md:flex-row gap-8">

                <!-- Controls Panel -->
                <div class="w-full md:w-1/3 bg-white p-6 rounded-2xl shadow-lg space-y-6 h-fit">

                    <!-- 1. Image Upload -->
                    <div>
                        <label for="image-upload" class="block text-sm font-bold text-gray-700 mb-2">1. Upload Image</label>
                        <input type="file" id="image-upload" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 cursor-pointer">
                        <button id="clear-image-btn" class="w-full mt-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg transition text-sm">Clear Image</button>
                    </div>

                    <!-- 2. Text Content -->
                    <div class="space-y-4">
                        <h3 class="text-sm font-bold text-gray-700">2. Add Text</h3>
                        <div>
                            <label for="heading-text" class="block text-xs font-medium text-gray-600 mb-1">Heading</label>
                            <input type="text" id="heading-text" placeholder="Your Catchy Headline" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition">
                        </div>
                        <div>
                            <label for="body-text" class="block text-xs font-medium text-gray-600 mb-1">Body</label>
                            <textarea id="body-text" rows="3" placeholder="Supporting text goes here. Keep it brief and engaging!" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition"></textarea>
                        </div>
                    </div>

                    <!-- 3. Styling & Position -->
                    <div class="space-y-4">
                        <h3 class="text-sm font-bold text-gray-700">3. Style & Position</h3>
                        <div>
                            <label for="font-select" class="block text-xs font-medium text-gray-600 mb-1">Font</label>
                            <select id="font-select" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition">
                                <option value="Stockholm Type">Stockholm Type (Custom)</option>
                                <option value="Inter">Inter (Sans-serif)</option>
                                <option value="Playfair Display">Playfair Display (Serif)</option>
                                <option value="Roboto Mono">Roboto Mono (Monospace)</option>
                                <option value="Oswald">Oswald (Display)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-600 mb-1">Text Alignment</label>
                            <div class="flex rounded-lg border border-gray-300 overflow-hidden">
                                <button id="align-left-btn" title="Align Left" class="w-1/3 p-2 flex justify-center items-center hover:bg-gray-100 transition">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <line x1="17" y1="10" x2="3" y2="10"></line>
                                        <line x1="21" y1="6" x2="3" y2="6"></line>
                                        <line x1="17" y1="14" x2="3" y2="14"></line>
                                        <line x1="21" y1="18" x2="3" y2="18"></line>
                                    </svg>
                                </button>
                                <button id="align-center-btn" title="Align Center" class="w-1/3 p-2 flex justify-center items-center hover:bg-gray-100 transition border-l border-r border-gray-300">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <line x1="21" y1="10" x2="3" y2="10"></line>
                                        <line x1="17" y1="6" x2="7" y2="6"></line>
                                        <line x1="21" y1="14" x2="3" y2="14"></line>
                                        <line x1="17" y1="18" x2="7" y2="18"></line>
                                    </svg>
                                </button>
                                <button id="align-right-btn" title="Align Right" class="w-1/3 p-2 flex justify-center items-center hover:bg-gray-100 transition">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <line x1="21" y1="10" x2="7" y2="10"></line>
                                        <line x1="21" y1="6" x2="3" y2="6"></line>
                                        <line x1="21" y1="14" x2="7" y2="14"></line>
                                        <line x1="21" y1="18" x2="3" y2="18"></line>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2 pt-2">
                            <button id="center-text-btn" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg transition text-sm">Center Text</button>
                            <button id="reset-logo-btn" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg transition text-sm">Reset Logo</button>
                        </div>
                        <div class="pt-2">
                            <label for="logo-size-slider" class="block text-xs font-medium text-gray-600 mb-1">Logo Size</label>
                            <input type="range" id="logo-size-slider" min="20" max="400" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                    </div>

                    <!-- 4. Colors -->
                    <div>
                        <h3 class="text-sm font-bold text-gray-700 mb-2">4. Colors</h3>
                        <div class="flex space-x-4">
                            <div class="flex-1">
                                <label class="block text-xs font-medium text-gray-600 mb-1">Text Color</label>
                                <div class="flex rounded-lg border border-gray-300 overflow-hidden">
                                    <button id="text-white-btn" class="w-1/2 bg-white text-black py-2 text-sm font-semibold border-r border-gray-300">White</button>
                                    <button id="text-black-btn" class="w-1/2 bg-gray-800 text-white py-2 text-sm font-semibold">Black</button>
                                </div>
                            </div>
                            <div class="flex-1">
                                <label class="block text-xs font-medium text-gray-600 mb-1">Logo Color</label>
                                <div class="flex rounded-lg border border-gray-300 overflow-hidden">
                                    <button id="logo-white-btn" class="w-1/2 bg-white text-black py-2 text-sm font-semibold border-r border-gray-300">White</button>
                                    <button id="logo-black-btn" class="w-1/2 bg-gray-800 text-white py-2 text-sm font-semibold">Black</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 5. Export -->
                    <div>
                        <h3 class="text-sm font-bold text-gray-700 mb-2">5. Export</h3>
                        <button id="export-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition text-base">
                        Export as PNG
                    </button>
                    </div>
                </div>

                <!-- Canvas View -->
                <div class="w-full md:w-2/3 flex items-center justify-center bg-white p-6 rounded-2xl shadow-lg">
                    <div id="canvas-wrapper" class="canvas-container relative bg-gray-200 rounded-lg flex items-center justify-center">
                        <canvas id="editor-canvas"></canvas>
                        <div id="font-loader" class="absolute inset-0 bg-white bg-opacity-75 flex-col items-center justify-center hidden">
                            <div class="loader"></div>
                            <p class="mt-4 text-gray-700 font-semibold">Loading font...</p>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                // --- CONFIG & STATE ---
                const CANVAS_WIDTH = 1080;
                const CANVAS_HEIGHT = 1080;

                const state = {
                    image: null,
                    headingText: 'Heading',
                    bodyText: 'This is where the body should be.',
                    font: 'Stockholm Type',
                    textAlign: 'left',
                    textColor: '#FFFFFF',
                    logoColor: '#FFFFFF',
                    textPos: {
                        x: 100,
                        y: 350
                    },
                    logoPos: {
                        x: CANVAS_WIDTH - 220,
                        y: CANVAS_HEIGHT - 140
                    },
                    logoSize: 140,
                    isDraggingText: false,
                    isDraggingLogo: false,
                    dragStart: {
                        x: 0,
                        y: 0
                    },
                    logoWhite: new Image(),
                    logoBlack: new Image(),
                    logosLoaded: false
                };

                const DEFAULT_LOGO_STATE = {
                    pos: {
                        x: CANVAS_WIDTH - 220,
                        y: CANVAS_HEIGHT - 140
                    },
                    size: 140
                };

                // --- DOM ELEMENTS ---
                const canvas = document.getElementById('editor-canvas');
                const ctx = canvas.getContext('2d');
                const imageUpload = document.getElementById('image-upload');
                const headingInput = document.getElementById('heading-text');
                const bodyInput = document.getElementById('body-text');
                const fontSelect = document.getElementById('font-select');
                const alignLeftBtn = document.getElementById('align-left-btn');
                const alignCenterBtn = document.getElementById('align-center-btn');
                const alignRightBtn = document.getElementById('align-right-btn');
                const centerTextBtn = document.getElementById('center-text-btn');
                const textWhiteBtn = document.getElementById('text-white-btn');
                const textBlackBtn = document.getElementById('text-black-btn');
                const logoWhiteBtn = document.getElementById('logo-white-btn');
                const logoBlackBtn = document.getElementById('logo-black-btn');
                const exportBtn = document.getElementById('export-btn');
                const fontLoader = document.getElementById('font-loader');
                const canvasWrapper = document.getElementById('canvas-wrapper');
                const clearImageBtn = document.getElementById('clear-image-btn');
                const logoSizeSlider = document.getElementById('logo-size-slider');
                const resetLogoBtn = document.getElementById('reset-logo-btn');

                // --- INITIALIZATION ---
                async function init() {
                    canvas.width = CANVAS_WIDTH;
                    canvas.height = CANVAS_HEIGHT;

                    // Set canvas display size to fit its container
                    const setCanvasSize = () => {
                        const {width} = canvasWrapper.getBoundingClientRect();
                        canvas.style.width = `${width}px`;
                        canvas.style.height = `${width}px`;
                    };
                    setCanvasSize();
                    window.addEventListener('resize', setCanvasSize);

                    loadAssets();
                    updateUI();
                    setupEventListeners();

                    // Load the initial default font before the first draw
                    fontLoader.style.display = 'flex';
                    try {
                        // Load both regular and bold weights since we use both
                        await document
                            .fonts
                            .load(`1em "${state.font}"`);
                        await document
                            .fonts
                            .load(`bold 1em "${state.font}"`);
                    } catch (err) {
                        console.error('Failed to load initial font:', err);
                    } finally {
                        fontLoader.style.display = 'none';
                    }

                    redrawCanvas();
                }

                // --- ASSET LOADING ---
                function loadAssets() {
                    // Raw SVG source for both logos. Using template literals to handle multi-line strings.
                    // Non-breaking spaces ( ) have been replaced with regular spaces for compatibility.
                    const logoWhiteSvg = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="133.5px" height="48px" viewBox="0 0 133.5 48" style="enable-background:new 0 0 133.5 48;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#FFFFFF;}
</style>
<g>
	<path class="st0" d="M20.151,48l-0.93-0.788C9.359,38.863,3.256,29.194,1.082,18.474C-0.239,11.953,0.016,1.827,0.027,1.399   L0.067,0h40.177l0.032,1.426c0.025,1.089,0.21,10.824-1.053,17.048c-2.178,10.722-8.281,20.391-18.141,28.738L20.151,48z   M1.524,1.499C1.503,2.338,1.302,12.012,2.551,18.176c2.102,10.368,8.024,19.741,17.6,27.86   c9.574-8.117,15.496-17.491,17.602-27.86c1.214-5.983,1.052-15.427,1.025-16.677H1.524z"/>
	<path class="st0" d="M24.869,7.818c0.45,0,0.816,0.365,0.816,0.814c0,0.449-0.366,0.815-0.816,0.815   c-0.448,0-0.814-0.366-0.814-0.815C24.055,8.183,24.42,7.818,24.869,7.818"/>
	<path class="st0" d="M15.25,7.818c0.446,0,0.812,0.365,0.812,0.814c0,0.449-0.366,0.815-0.812,0.815   c-0.45,0-0.817-0.366-0.817-0.815C14.433,8.183,14.8,7.818,15.25,7.818"/>
	<path class="st0" d="M13.004,29.483c0.697,0,0.73-0.36,0.762-0.476c-0.134,0.135-0.404,0.225-0.822,0.225   c-0.422,0-0.83-0.172-1.048-0.854c-0.111-0.352-0.024-0.758-0.024-0.758s0.462,0.368,0.818,0.348   c0.633-0.033,1.109-0.435,1.109-1.161c0-0.855-0.61-1.776-1.805-3.196c-1.068-1.264-1.593-2.625-1.593-3.961   c0-3.149,3.138-5.136,3.138-5.136s0.328,7.875,0.394,8.725c0.068,0.85,0.266,2.302,0.773,3.43v2.744   c-0.139,0.433-0.684,0.613-1.066,0.613C13.339,30.025,12.967,29.745,13.004,29.483"/>
	<path class="st0" d="M20.058,13.437c-4.645,0-7.026,0.552-7.026,0.552l-0.608-1.226c0,0,3.223-0.618,7.635-0.618   c4.41,0,7.637,0.618,7.637,0.618l-0.61,1.226C27.085,13.99,24.704,13.437,20.058,13.437"/>
	<path class="st0" d="M24.227,35.9h-8.335l-1.376-1.54c0,0,0.87-0.793,0.87-2.242v-4.318c-0.015-0.004,1.604,2.341,4.672,2.341   c2.694,0,4.7-2.29,4.673-2.282v4.259c0,1.449,0.869,2.242,0.869,2.242L24.227,35.9z"/>
	<path class="st0" d="M27.427,27.969c0.355,0.02,0.818-0.348,0.818-0.348s0.085,0.405-0.025,0.758   c-0.214,0.682-0.627,0.854-1.044,0.854c-0.422,0-0.691-0.091-0.824-0.225c0.031,0.116,0.067,0.476,0.761,0.476   c0.037,0.261-0.332,0.542-0.632,0.542c-0.382,0-0.928-0.18-1.065-0.613v-2.744c0.506-1.127,0.702-2.58,0.768-3.43   c0.067-0.85,0.398-8.725,0.398-8.725s3.135,1.987,3.135,5.136c0,1.336-0.524,2.697-1.592,3.961c-1.2,1.42-1.805,2.341-1.805,3.196   C26.318,27.534,26.792,27.936,27.427,27.969"/>
	<path class="st0" d="M27.971,12.215c0,0-3.352-0.675-7.913-0.675c-4.56,0-7.91,0.675-7.91,0.675L9.933,7.781   c0,0,0.654-0.452,1.121-0.452c0.822,0,1.006,0.739,1.006,0.997c0,0.205-0.024,0.361-0.147,0.501l-0.035,0.035   c-0.185,0.211-0.231,0.264-0.231,0.404c0,0.127,0.089,0.328,0.33,0.328c0.214,0,0.264-0.068,0.36-0.336   c0.1-0.272,0.367-0.546,0.746-0.546c0.371,0,0.785,0.324,0.785,0.785c0,0.492-0.402,0.787-0.785,0.787   c-0.22,0-0.324-0.063-0.395-0.108c-0.049-0.029-0.075-0.043-0.116-0.043c-0.048,0-0.085,0.032-0.105,0.057   c-0.062,0.073-0.084,0.192-0.062,0.309c0.063,0.339,0.703,0.862,1.422,0.862c1.069,0,1.719-0.963,1.719-1.658   c0.41,0.977,1.32,1.185,1.948,1.185c1.693,0,2.043-1.504,2.043-1.906c0-0.271-0.086-0.492-0.166-0.53   c-0.011-0.003-0.041-0.017-0.096,0.033l-0.068,0.059c-0.205,0.188-0.591,0.534-1.13,0.534c-0.605,0-1.232-0.454-1.232-1.214   c0-0.807,0.619-1.228,1.229-1.228c0.507,0,0.794,0.278,0.987,0.463c0.075,0.074,0.152,0.151,0.194,0.151   c0.085,0,0.166-0.035,0.217-0.094c0.041-0.046,0.065-0.105,0.065-0.17c0-0.011,0-0.024-0.003-0.037   c-0.007-0.055-0.073-0.121-0.151-0.199c-0.167-0.174-0.396-0.412-0.396-0.873c0-0.528,0.43-1.091,1.069-1.094   c0.643,0.003,1.07,0.567,1.07,1.094c0,0.46-0.231,0.699-0.399,0.873c-0.076,0.078-0.14,0.144-0.147,0.199   c0,0.013-0.003,0.026-0.003,0.037c0,0.065,0.023,0.124,0.065,0.17c0.049,0.059,0.129,0.094,0.216,0.094   c0.043,0,0.12-0.077,0.194-0.151c0.192-0.185,0.481-0.463,0.989-0.463c0.61,0,1.228,0.422,1.228,1.228   c0,0.761-0.63,1.214-1.234,1.214c-0.536,0-0.924-0.347-1.129-0.534l-0.064-0.059c-0.059-0.05-0.088-0.036-0.097-0.033   c-0.079,0.038-0.167,0.259-0.167,0.53c0,0.402,0.348,1.906,2.042,1.906c0.627,0,1.537-0.208,1.948-1.185   c0,0.695,0.65,1.658,1.722,1.658c0.718,0,1.357-0.523,1.42-0.862c0.025-0.117-0.001-0.237-0.061-0.309   c-0.022-0.025-0.057-0.057-0.107-0.057c-0.041,0-0.067,0.014-0.113,0.043c-0.074,0.045-0.175,0.108-0.396,0.108   c-0.384,0-0.785-0.295-0.785-0.787c0-0.462,0.415-0.785,0.785-0.785c0.378,0,0.646,0.273,0.746,0.546   c0.1,0.268,0.149,0.336,0.362,0.336c0.24,0,0.328-0.2,0.328-0.328c0-0.14-0.044-0.194-0.232-0.404l-0.032-0.035   c-0.123-0.14-0.15-0.296-0.15-0.501c0-0.258,0.188-0.997,1.009-0.997c0.467,0,1.119,0.452,1.119,0.452L27.971,12.215z"/>
	<path class="st0" d="M25.451,15.61c-0.004,0.006-0.397,0.639-1.121,0.639l-1.065,0c-1.871,0-2.123,1.154-2.123,2.283v3.967   c0.075,0.072,0.541,0.519,0.692,0.66c0.064,0.058,0.087,0.112,0.07,0.158c-0.019,0.05-0.085,0.078-0.185,0.078h-2.654   c-0.144,0-0.195-0.048-0.213-0.087c-0.02-0.044-0.007-0.098,0.036-0.147c0.069-0.087,0.567-0.517,0.763-0.681   c0.115-0.098,0.249-0.145,0.411-0.145h0.239c0.2,0,0.29-0.101,0.29-0.328v-3.949c0-1.423,0.991-2.497,2.305-2.497   c0.367,0,0.608,0.001,0.818,0.001c0.162,0,0.307,0.001,0.478,0.001c0.39,0,1.233-0.002,1.233-0.002h0.059L25.451,15.61z   M23.573,18.628c-0.269,0-0.47-0.018-0.694-0.061c-0.126-0.025-0.129-0.1-0.126-0.122c0.008-0.079,0.109-0.143,0.225-0.143   c0.137,0,0.297-0.087,0.297-0.33c0-0.222-0.207-0.532-0.545-0.532c-0.115,0-0.153-0.044-0.166-0.081   c-0.021-0.064,0.027-0.153,0.124-0.225c0.222-0.173,0.503-0.254,0.886-0.254c1.045,0,1.592,0.818,1.592,1.101   C25.168,18.299,24.571,18.628,23.573,18.628 M22.274,25.52c-0.012,0.05-0.059,0.104-0.16,0.104h-4.125   c-0.1,0-0.147-0.054-0.159-0.104c-0.017-0.074,0.034-0.15,0.129-0.195c0.279-0.136,1.108-0.539,1.307-0.629   c0.112-0.054,0.161-0.062,0.282-0.062h1.009c0.12,0,0.168,0.008,0.281,0.062c0.127,0.057,0.511,0.243,0.849,0.407   c0.185,0.089,0.355,0.172,0.46,0.222C22.241,25.37,22.29,25.446,22.274,25.52 M21.47,26.404c-0.086,0.06-0.633,0.425-0.751,0.5   c-0.101,0.063-0.156,0.073-0.281,0.073h-0.762c-0.125,0-0.176-0.01-0.278-0.073c-0.117-0.073-0.666-0.438-0.753-0.5   c-0.058-0.038-0.085-0.104-0.068-0.162c0.018-0.059,0.075-0.095,0.152-0.095h2.656c0.076,0,0.131,0.035,0.15,0.093   C21.553,26.298,21.528,26.364,21.47,26.404 M16.208,18.567c-0.126-0.025-0.129-0.1-0.126-0.122   c0.008-0.079,0.108-0.143,0.223-0.143c0.139,0,0.3-0.087,0.3-0.33c0-0.222-0.207-0.532-0.544-0.532   c-0.114,0-0.153-0.044-0.166-0.08c-0.022-0.065,0.025-0.151,0.123-0.225c0.222-0.173,0.504-0.254,0.886-0.254   c1.044,0,1.591,0.818,1.591,1.101c0,0.318-0.595,0.648-1.592,0.648C16.637,18.628,16.436,18.61,16.208,18.567 M16.902,15.585   c0.126-0.017,0.248-0.025,0.361-0.025c0.297,0,1.315,0.057,1.965,0.785c0.62,0.699,0.584,1.376,0.444,1.821   c-0.05,0.162-0.106,0.24-0.172,0.24c-0.07,0-0.122-0.087-0.158-0.264c-0.07-0.346-0.263-0.87-0.792-1.402   c-0.502-0.503-1.177-0.756-1.656-0.879c-0.173-0.044-0.252-0.094-0.249-0.155C16.65,15.645,16.734,15.606,16.902,15.585   M20.058,14.109c-3.315,0-5.394,0.29-5.765,0.347c0.024,0.622,0.235,5.708,0.255,7.136c0.007,0.586,0.168,2.575,0.319,3.323   c0.33,1.649,1.799,4.44,5.192,4.44c3.394,0,4.861-2.79,5.194-4.44c0.15-0.746,0.308-2.735,0.316-3.323   c0.023-1.428,0.229-6.513,0.258-7.136C25.453,14.399,23.375,14.109,20.058,14.109"/>
</g>
<g>
	<path class="st0" d="M49.218,7.992c1.333,0,2.351,0.433,3.202,1.362l-1.208,1.076c-0.587-0.615-1.167-0.868-1.99-0.868   c-0.839,0-1.707,0.481-1.707,1.286c0,0.736,0.576,1.307,1.812,1.797l0.923,0.394c1.811,0.736,2.691,1.762,2.691,3.135   c0,1.5-1.165,3.115-3.723,3.115c-1.475,0-2.763-0.571-3.938-1.744l1.351-1.158c0.519,0.598,1.451,1.237,2.567,1.291   c0.048,0.002,0.095,0.003,0.141,0.003c1.143,0,1.826-0.686,1.826-1.349c0-0.917-0.735-1.411-1.839-1.87l-0.938-0.378   c-1.778-0.734-2.641-1.78-2.641-3.199C45.746,9.075,47.511,7.992,49.218,7.992"/>
	<path class="st0" d="M53.559,12.083h1.433v4.48c0,1.619,0.973,2.586,2.604,2.586h1.358v-1.604h-0.865   c-1.115,0-1.333-0.508-1.333-1.386v-4.076h2.199v-1.552h-2.199V8.46h-1.763v2.071h-1.433V12.083z"/>
	<path class="st0" d="M64.499,17.615c-1.536,0-2.651-1.167-2.651-2.775c0-1.608,1.115-2.775,2.651-2.775   c1.512,0,2.651,1.193,2.651,2.775S66.011,17.615,64.499,17.615 M64.499,10.391c-2.547,0-4.467,1.913-4.467,4.45   c0,2.537,1.92,4.45,4.467,4.45c2.547,0,4.467-1.913,4.467-4.45C68.966,12.304,67.046,10.391,64.499,10.391"/>
	<path class="st0" d="M74.812,10.391c-2.536,0-4.449,1.913-4.449,4.45c0,2.537,1.913,4.45,4.449,4.45   c1.266,0,2.385-0.474,3.239-1.372l-1.197-1.23c-0.538,0.584-1.242,0.892-2.042,0.892c-1.526,0-2.634-1.152-2.634-2.74   c0-1.587,1.108-2.74,2.634-2.74c0.8,0,1.504,0.308,2.042,0.892l1.197-1.229C77.197,10.865,76.079,10.391,74.812,10.391"/>
	<polygon class="st0" points="81.491,14.777 85.345,19.15 87.49,19.15 83.47,14.612 87.052,10.531 84.993,10.531 81.491,14.491   81.491,7.049 79.728,7.049 79.728,19.15 81.491,19.15  "/>
	<path class="st0" d="M94.813,19.15h1.763v-5.065c0-2.244-1.368-3.694-3.483-3.694c-0.974,0-1.848,0.342-2.398,0.939l-0.148,0.161   V7.049h-1.763v12.1h1.763l0.004-5.478c0.339-1.035,1.111-1.606,2.173-1.606c1.357,0,2.089,1.058,2.089,2.054V19.15z"/>
	<g>
		<path class="st0" d="M102.703,17.615c-1.537,0-2.652-1.167-2.652-2.775c0-1.608,1.115-2.775,2.652-2.775   c1.511,0,2.651,1.193,2.651,2.775S104.214,17.615,102.703,17.615 M102.703,10.391c-2.547,0-4.468,1.913-4.468,4.45   c0,2.537,1.921,4.45,4.468,4.45c2.547,0,4.467-1.913,4.467-4.45C107.17,12.304,105.25,10.391,102.703,10.391"/>
	</g>
	<rect x="108.89" y="7.049" class="st0" width="1.762" height="12.1"/>
	<path class="st0" d="M123.883,19.15h1.763v-5.065c0-2.279-1.268-3.694-3.307-3.694c-0.551,0-1.93,0.128-2.833,1.32l-0.072,0.095   l-0.067-0.099c-0.579-0.861-1.503-1.316-2.671-1.316c-0.517,0-1.492,0.122-2.203,0.938l-0.149,0.171v-0.968h-1.764v8.618h1.764   l0.004-5.531c0.318-0.972,1.058-1.553,1.98-1.553c1.314,0,1.913,1.065,1.913,2.054v5.03h1.762v-5.065c0-0.139,0-0.259-0.016-0.394   l-0.003-0.019l0.006-0.018c0.336-1.009,1.065-1.588,1.997-1.588c1.309,0,1.896,1.032,1.896,2.054V19.15z"/>
	<path class="st0" d="M130.342,10.348c1.097,0,1.945,0.365,2.668,1.147l0.084,0.09l-1.194,1.029l-0.085-0.089   c-0.461-0.48-0.887-0.676-1.471-0.676c-0.561,0-1.166,0.323-1.166,0.844c0,0.303,0.136,0.758,1.315,1.209l0.733,0.303   c1.5,0.589,2.229,1.421,2.229,2.543c0,1.263-1.069,2.541-3.113,2.541c-1.181,0-2.181-0.43-3.24-1.394L127,17.803l1.274-1.1   l0.084,0.097c0.446,0.517,1.24,0.887,1.976,0.922c0.035,0.002,0.069,0.003,0.103,0.003c0.789,0,1.26-0.435,1.26-0.856   c0-0.53-0.363-0.874-1.34-1.267l-0.736-0.286c-1.456-0.58-2.194-1.453-2.194-2.593C127.427,11.237,128.909,10.348,130.342,10.348"/>
	<path class="st0" d="M49.511,24.849c1.097,0,1.945,0.365,2.669,1.147l0.084,0.09l-1.194,1.029l-0.085-0.089   c-0.461-0.48-0.887-0.676-1.471-0.676c-0.561,0-1.166,0.323-1.166,0.844c0,0.303,0.136,0.758,1.315,1.209l0.733,0.303   c1.5,0.588,2.229,1.42,2.229,2.543c0,1.263-1.07,2.541-3.114,2.541c-1.181,0-2.181-0.43-3.24-1.394l-0.102-0.092l1.274-1.1   l0.084,0.097c0.445,0.516,1.239,0.887,1.976,0.922c0.035,0.002,0.07,0.003,0.103,0.003c0.789,0,1.259-0.436,1.259-0.857   c0-0.53-0.363-0.873-1.34-1.266l-0.736-0.286c-1.456-0.58-2.194-1.452-2.194-2.593C46.596,25.737,48.078,24.849,49.511,24.849"/>
	<path class="st0" d="M53.559,26.536h1.433v4.48c0,1.619,0.973,2.586,2.604,2.586h1.358v-1.604h-0.865   c-1.115,0-1.333-0.508-1.333-1.386v-4.076h2.199v-1.552h-2.199v-2.071h-1.763v2.071h-1.433V26.536z"/>
	<path class="st0" d="M64.482,32.068c-1.527,0-2.634-1.167-2.634-2.775c0-1.608,1.108-2.775,2.634-2.775   c1.003,0,1.926,0.473,2.41,1.235l0.013,0.021v3.038l-0.013,0.021C66.409,31.595,65.485,32.068,64.482,32.068 M64.464,24.844   c-2.527,0-4.432,1.913-4.432,4.45c0,2.536,1.906,4.449,4.432,4.449c0.875,0,1.671-0.267,2.302-0.772l0.138-0.111v0.742h1.763   v-8.618h-1.763v0.743l-0.138-0.111C66.134,25.111,65.338,24.844,64.464,24.844"/>
	<g>
		<path class="st0" d="M74.813,32.068c-1.526,0-2.634-1.167-2.634-2.775c0-1.608,1.108-2.775,2.634-2.775   c1.003,0,1.926,0.473,2.41,1.235l0.013,0.021v3.038l-0.013,0.021C76.739,31.595,75.816,32.068,74.813,32.068 M74.795,24.844   c-2.527,0-4.433,1.913-4.433,4.45c0,2.536,1.906,4.449,4.433,4.449c0.874,0,1.67-0.267,2.302-0.772l0.139-0.111v0.742h1.763v-12.1   h-1.763v4.224l-0.139-0.111C76.465,25.111,75.669,24.844,74.795,24.844"/>
	</g>
</g>
</svg>`;

                    const logoBlackSvg = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="140.8px" height="48px" viewBox="0 0 140.8 48" style="enable-background:new 0 0 140.8 48;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#231F20;}
	.st1{fill:#FFFFFF;}
</style>
<g>
	<g>
		<path class="st0" d="M40.179,0H0.028C0.015,0.423-0.245,11.205,1.131,17.995C3.385,29.107,9.592,39.1,20.103,48    c10.513-8.9,16.719-18.893,18.975-30.005C40.456,11.205,40.189,0.423,40.179,0"/>
		<path class="st1" d="M25.251,6.974c0.481,0,0.872,0.39,0.872,0.87c0,0.48-0.391,0.872-0.872,0.872    c-0.48,0-0.871-0.393-0.871-0.872C24.38,7.364,24.771,6.974,25.251,6.974"/>
		<path class="st1" d="M14.958,6.974c0.477,0,0.868,0.39,0.868,0.87c0,0.48-0.391,0.872-0.868,0.872    c-0.481,0-0.874-0.393-0.874-0.872C14.084,7.364,14.477,6.974,14.958,6.974"/>
		<path class="st1" d="M12.555,30.156c0.745,0,0.781-0.386,0.815-0.51c-0.143,0.144-0.432,0.241-0.88,0.241    c-0.451,0-0.888-0.184-1.121-0.914c-0.118-0.377-0.026-0.811-0.026-0.811s0.494,0.394,0.875,0.373    c0.677-0.035,1.187-0.465,1.187-1.242c0-0.915-0.652-1.9-1.932-3.42c-1.142-1.352-1.705-2.808-1.705-4.238    c0-3.37,3.357-5.496,3.357-5.496s0.351,8.426,0.422,9.336c0.073,0.909,0.284,2.463,0.827,3.67v2.936    c-0.148,0.463-0.733,0.655-1.141,0.655C12.914,30.736,12.515,30.436,12.555,30.156"/>
		<path class="st1" d="M20.103,12.986c-4.971,0-7.518,0.591-7.518,0.591l-0.652-1.311c0,0,3.449-0.661,8.17-0.661    c4.719,0,8.172,0.661,8.172,0.661l-0.653,1.311C27.623,13.577,25.075,12.986,20.103,12.986"/>
		<path class="st1" d="M24.564,37.022h-8.919l-1.472-1.648c0,0,0.931-0.848,0.931-2.399v-4.621    c-0.016-0.004,1.717,2.504,4.999,2.504c2.883,0,5.029-2.45,5.001-2.441v4.558c0,1.551,0.93,2.399,0.93,2.399L24.564,37.022z"/>
		<path class="st1" d="M27.989,28.535c0.38,0.021,0.875-0.373,0.875-0.373s0.092,0.434-0.027,0.811    c-0.228,0.73-0.671,0.914-1.116,0.914c-0.451,0-0.74-0.097-0.883-0.241c0.033,0.124,0.071,0.51,0.814,0.51    c0.04,0.279-0.356,0.58-0.677,0.58c-0.408,0-0.992-0.193-1.139-0.656v-2.936c0.541-1.207,0.751-2.76,0.822-3.67    c0.071-0.91,0.426-9.336,0.426-9.336s3.354,2.126,3.354,5.496c0,1.429-0.56,2.886-1.703,4.238c-1.284,1.52-1.932,2.505-1.932,3.42    C26.802,28.07,27.309,28.5,27.989,28.535"/>
		<path class="st1" d="M28.571,11.678c0,0-3.587-0.722-8.468-0.722c-4.879,0-8.463,0.722-8.463,0.722l-2.37-4.745    c0,0,0.7-0.484,1.199-0.484c0.88,0,1.077,0.791,1.077,1.067c0,0.219-0.026,0.387-0.157,0.537l-0.037,0.038    c-0.198,0.226-0.247,0.283-0.247,0.433c0,0.137,0.096,0.35,0.353,0.35c0.229,0,0.283-0.073,0.386-0.359    c0.107-0.291,0.393-0.584,0.798-0.584c0.397,0,0.84,0.346,0.84,0.84c0,0.527-0.43,0.842-0.84,0.842    c-0.236,0-0.347-0.067-0.423-0.115c-0.053-0.031-0.08-0.047-0.124-0.047c-0.051,0-0.092,0.035-0.113,0.062    c-0.065,0.078-0.09,0.206-0.065,0.331c0.067,0.362,0.752,0.922,1.522,0.922c1.144,0,1.839-1.03,1.839-1.774    c0.438,1.046,1.412,1.268,2.085,1.268c1.812,0,2.187-1.609,2.187-2.04c0-0.29-0.092-0.526-0.177-0.567    c-0.012-0.003-0.044-0.018-0.103,0.035l-0.073,0.064c-0.22,0.2-0.632,0.572-1.209,0.572c-0.647,0-1.318-0.486-1.318-1.3    c0-0.863,0.662-1.314,1.315-1.314c0.543,0,0.85,0.298,1.057,0.495c0.08,0.079,0.163,0.162,0.207,0.162    c0.091,0,0.177-0.037,0.233-0.1c0.044-0.049,0.068-0.113,0.068-0.182c0-0.011,0-0.025-0.003-0.039    c-0.007-0.058-0.079-0.129-0.162-0.213c-0.179-0.186-0.424-0.441-0.424-0.934c0-0.565,0.459-1.168,1.144-1.171    c0.688,0.003,1.146,0.606,1.146,1.171c0,0.493-0.247,0.748-0.427,0.934c-0.081,0.083-0.15,0.154-0.157,0.213    c0,0.014-0.003,0.028-0.003,0.039c0,0.069,0.024,0.133,0.068,0.182c0.053,0.063,0.139,0.1,0.231,0.1    c0.046,0,0.129-0.082,0.207-0.162c0.206-0.197,0.514-0.495,1.058-0.495c0.653,0,1.314,0.451,1.314,1.314    c0,0.814-0.674,1.3-1.321,1.3c-0.574,0-0.988-0.371-1.208-0.572l-0.069-0.064c-0.063-0.053-0.094-0.038-0.104-0.035    c-0.084,0.041-0.179,0.278-0.179,0.567c0,0.43,0.373,2.04,2.185,2.04c0.671,0,1.645-0.222,2.085-1.268    c0,0.744,0.695,1.774,1.842,1.774c0.768,0,1.452-0.56,1.519-0.922c0.027-0.125-0.001-0.253-0.065-0.331    c-0.023-0.027-0.062-0.062-0.114-0.062c-0.045,0-0.072,0.015-0.121,0.047c-0.079,0.048-0.187,0.115-0.424,0.115    c-0.411,0-0.839-0.315-0.839-0.842c0-0.494,0.444-0.84,0.839-0.84c0.404,0,0.691,0.293,0.798,0.584    c0.107,0.286,0.159,0.359,0.387,0.359c0.257,0,0.351-0.214,0.351-0.35c0-0.15-0.047-0.207-0.248-0.433L28.82,8.053    c-0.131-0.15-0.16-0.317-0.16-0.537c0-0.276,0.201-1.067,1.08-1.067c0.5,0,1.198,0.484,1.198,0.484L28.571,11.678z"/>
		<path class="st1" d="M26.275,14.076c-0.03,0.666-0.251,6.108-0.276,7.636c-0.008,0.628-0.178,2.757-0.339,3.555    c-0.355,1.765-1.925,4.751-5.558,4.751c-3.63,0-5.202-2.986-5.555-4.751c-0.161-0.8-0.334-2.929-0.341-3.555    c-0.021-1.528-0.247-6.97-0.273-7.636c0.397-0.061,2.622-0.371,6.169-0.371C23.653,13.705,25.877,14.015,26.275,14.076"/>
		<path class="st0" d="M23.868,16.705c-0.316,0-0.653,0.051-0.927,0.264c-0.146,0.11-0.193,0.263,0.023,0.263    c0.38,0,0.618,0.345,0.618,0.605c0,0.259-0.164,0.389-0.354,0.389c-0.192,0-0.298,0.173-0.099,0.213    c0.21,0.041,0.421,0.065,0.735,0.065c1.088,0,1.671-0.355,1.671-0.657C25.536,17.544,24.938,16.705,23.868,16.705"/>
		<path class="st0" d="M16.728,15.544c0.5,0.129,1.24,0.401,1.788,0.95c0.563,0.566,0.778,1.127,0.857,1.519    c0.067,0.328,0.186,0.342,0.284,0.022c0.144-0.461,0.187-1.176-0.468-1.915c-0.606-0.679-1.532-0.828-2.076-0.828    c-0.133,0-0.264,0.011-0.381,0.027C16.415,15.359,16.401,15.46,16.728,15.544"/>
		<path class="st0" d="M22.324,25.738c-0.317-0.151-1.191-0.577-1.401-0.672c-0.116-0.055-0.163-0.063-0.286-0.063h-1.08    c-0.124,0-0.171,0.008-0.287,0.063c-0.211,0.096-1.088,0.521-1.398,0.672c-0.176,0.083-0.15,0.253,0.017,0.253h4.414    C22.472,25.991,22.496,25.821,22.324,25.738"/>
		<path class="st0" d="M18.395,17.847c0-0.303-0.594-1.143-1.666-1.143c-0.316,0-0.653,0.051-0.927,0.264    c-0.144,0.109-0.191,0.263,0.024,0.263c0.377,0,0.619,0.345,0.619,0.605c0,0.259-0.166,0.389-0.357,0.389    c-0.189,0-0.297,0.174-0.097,0.214c0.213,0.041,0.42,0.065,0.737,0.065C17.814,18.505,18.395,18.149,18.395,17.847"/>
		<path class="st0" d="M21.524,26.622h-2.842c-0.15,0-0.172,0.141-0.07,0.21c0.09,0.064,0.672,0.453,0.804,0.534    c0.103,0.064,0.153,0.073,0.278,0.073h0.815c0.127,0,0.178-0.009,0.281-0.073c0.129-0.082,0.711-0.47,0.802-0.534    C21.692,26.764,21.673,26.622,21.524,26.622"/>
		<path class="st0" d="M24.524,15.294c-0.42,0-0.688-0.002-1.387-0.002c-1.435,0-2.43,1.191-2.43,2.636v4.226    c0,0.24-0.093,0.387-0.345,0.387h-0.256c-0.139,0-0.284,0.034-0.417,0.147c-0.216,0.181-0.741,0.635-0.813,0.725    c-0.076,0.085-0.054,0.191,0.163,0.191h2.84c0.163,0,0.232-0.071,0.1-0.191c-0.179-0.166-0.753-0.717-0.753-0.717v-4.261    c0-1.111,0.216-2.478,2.308-2.478c0.557,0,1.05,0.001,1.14,0.001c0.764,0,1.169-0.667,1.169-0.667S24.941,15.294,24.524,15.294"/>
	</g>
	<g>
		<path class="st0" d="M47.4,16.118c0.618,0.743,1.665,1.367,2.761,1.419c1.244,0.06,2.046-0.637,2.046-1.38    c0-0.899-0.673-1.424-1.937-1.95L49.258,13.8c-1.932-0.797-2.889-1.95-2.889-3.511c0-1.933,1.86-3.188,3.81-3.188    c1.481,0,2.609,0.491,3.549,1.542l-1.405,1.252c-0.638-0.689-1.252-0.962-2.14-0.962c-0.866,0-1.769,0.485-1.769,1.316    c0,0.781,0.627,1.364,1.91,1.872l0.993,0.424c1.751,0.712,2.943,1.764,2.943,3.443c0,1.682-1.348,3.425-4.081,3.425    c-1.886,0-3.264-0.855-4.345-1.953L47.4,16.118z"/>
		<path class="st0" d="M60.536,19.262h-1.551c-1.815,0-2.893-1.078-2.893-2.874v-4.726h-1.541V9.81h1.541V7.583h2.08V9.81h2.364    v1.852h-2.364v4.292c0,0.964,0.265,1.399,1.342,1.399h1.022V19.262z"/>
		<path class="st0" d="M61.525,14.536c0-2.76,2.079-4.878,4.896-4.878c2.798,0,4.896,2.118,4.896,4.878    c0,2.76-2.098,4.877-4.896,4.877C63.605,19.414,61.525,17.297,61.525,14.536 M69.182,14.536c0-1.645-1.153-2.893-2.76-2.893    c-1.626,0-2.76,1.248-2.76,2.893c0,1.645,1.134,2.892,2.76,2.892C68.029,17.429,69.182,16.181,69.182,14.536"/>
		<g>
			<path class="st0" d="M72.656,14.536c0-2.76,2.079-4.878,4.877-4.878c1.512,0,2.741,0.624,3.611,1.569l-1.418,1.456     c-0.492-0.567-1.21-1.002-2.193-1.002c-1.607,0-2.741,1.21-2.741,2.855c0,1.645,1.134,2.855,2.741,2.855     c0.983,0,1.701-0.435,2.193-1.002l1.418,1.456c-0.869,0.945-2.098,1.569-3.611,1.569C74.735,19.414,72.656,17.297,72.656,14.536"/>
		</g>
		<polygon class="st0" points="84.735,19.262 82.656,19.262 82.656,6.065 84.735,6.065 84.735,14.082 88.516,9.81 90.974,9.81    87.042,14.291 91.446,19.262 88.894,19.262 84.735,14.536   "/>
		<path class="st0" d="M94.515,13.307v5.956h-2.08V6.065h2.08v4.633c0.662-0.718,1.664-1.04,2.647-1.04    c2.344,0,3.838,1.626,3.838,4.065v5.539h-2.08v-5.502c0-1.021-0.756-2.118-2.155-2.118C95.687,11.643,94.874,12.211,94.515,13.307    "/>
		<g>
			<path class="st0" d="M102.685,14.536c0-2.76,2.079-4.878,4.897-4.878c2.798,0,4.896,2.118,4.896,4.878     c0,2.76-2.098,4.877-4.896,4.877C104.765,19.414,102.685,17.297,102.685,14.536 M110.342,14.536c0-1.645-1.153-2.893-2.76-2.893     c-1.627,0-2.76,1.248-2.76,2.893c0,1.645,1.134,2.892,2.76,2.892C109.189,17.429,110.342,16.181,110.342,14.536"/>
		</g>
		<rect x="114.164" y="6.065" class="st0" width="2.079" height="13.197"/>
		<path class="st0" d="M120.358,13.251v6.011h-2.08V9.81h2.08v0.888c0.643-0.737,1.569-1.039,2.439-1.039    c1.323,0,2.325,0.529,2.949,1.455c0.889-1.172,2.212-1.455,3.119-1.455c2.325,0,3.649,1.626,3.649,4.064v5.539h-2.08v-5.501    c0-1.021-0.586-2.117-1.947-2.117c-0.945,0-1.701,0.567-2.061,1.645c0.019,0.151,0.019,0.283,0.019,0.435v5.539h-2.079v-5.501    c0-1.021-0.605-2.117-1.966-2.117C121.473,11.644,120.698,12.211,120.358,13.251"/>
		<path class="st0" d="M133.677,17.775l0.167,0.152c1.126,1.024,2.21,1.52,3.538,1.52c2.248,0,3.424-1.412,3.424-2.808    c0-1.241-0.8-2.159-2.446-2.805l-0.789-0.325c-1.231-0.472-1.374-0.932-1.374-1.238c0-0.502,0.603-0.84,1.186-0.84    c0.643,0,1.073,0.226,1.534,0.707l0.138,0.144l1.391-1.199l-0.139-0.15c-0.764-0.827-1.683-1.258-2.926-1.258    c-1.579,0-3.211,0.983-3.211,2.628c0,1.26,0.81,2.222,2.408,2.858l0.794,0.309c1.02,0.41,1.399,0.762,1.399,1.3    c0,0.419-0.482,0.852-1.287,0.852c-0.035,0-0.071-0.001-0.107-0.003c-0.732-0.034-1.582-0.39-2.08-0.968l-0.136-0.157    L133.677,17.775z"/>
		<path class="st0" d="M46.51,33.282l0.167,0.152c1.125,1.024,2.21,1.52,3.538,1.52c2.248,0,3.424-1.412,3.424-2.807    c0-1.241-0.8-2.159-2.445-2.805l-0.789-0.325c-1.231-0.472-1.374-0.932-1.374-1.238c0-0.502,0.603-0.839,1.186-0.839    c0.643,0,1.073,0.226,1.534,0.706l0.138,0.144l1.391-1.198l-0.14-0.15c-0.764-0.827-1.683-1.258-2.926-1.258    c-1.578,0-3.211,0.983-3.211,2.628c0,1.26,0.81,2.222,2.408,2.858l0.794,0.308c1.02,0.41,1.399,0.762,1.399,1.3    c0,0.419-0.482,0.852-1.287,0.852c-0.036,0-0.071-0.001-0.107-0.003c-0.732-0.034-1.582-0.39-2.08-0.969L47.995,32L46.51,33.282z"/>
		<path class="st0" d="M60.536,34.803h-1.551c-1.815,0-2.893-1.078-2.893-2.874v-4.726h-1.541V25.35h1.541v-2.227h2.08v2.227h2.364    v1.853h-2.364v4.291c0,0.964,0.265,1.399,1.342,1.399h1.022V34.803z"/>
		<path class="st0" d="M68.917,34.104c-0.661,0.529-1.531,0.85-2.533,0.85c-2.798,0-4.858-2.117-4.858-4.877    c0-2.76,2.06-4.877,4.858-4.877c1.002,0,1.872,0.322,2.533,0.851v-0.7h2.08v9.452h-2.08V34.104z M68.917,31.683V28.47    c-0.492-0.775-1.456-1.286-2.514-1.286c-1.607,0-2.741,1.247-2.741,2.893c0,1.644,1.134,2.892,2.741,2.892    C67.461,32.969,68.425,32.459,68.917,31.683"/>
		<path class="st0" d="M80.047,34.104c-0.662,0.529-1.531,0.85-2.533,0.85c-2.798,0-4.859-2.117-4.859-4.877    c0-2.76,2.061-4.877,4.859-4.877c1.002,0,1.871,0.322,2.533,0.851v-4.445h2.079v13.197h-2.079V34.104z M80.047,31.683V28.47    c-0.492-0.775-1.456-1.286-2.514-1.286c-1.607,0-2.741,1.247-2.741,2.893c0,1.644,1.134,2.892,2.741,2.892    C78.592,32.969,79.556,32.459,80.047,31.683"/>
	</g>
</g>
</svg>`;

                    // Helper function to load an SVG string into an Image object
                    const loadLogo = (svgString, imageElement) => {
                        return new Promise((resolve, reject) => {
                            // Base64 encode the SVG string to create a data URL
                            const dataUrl = `data:image/svg+xml;base64,${btoa(svgString)}`;

                            imageElement.onload = () => resolve();
                            imageElement.onerror = (err) => {
                                console.error("Failed to load logo from data URL.", err);
                                reject(err);
                            };
                            imageElement.src = dataUrl;
                        });
                    };

                    // Load both logos concurrently
                    Promise
                        .all([
                            loadLogo(logoWhiteSvg, state.logoWhite),
                            loadLogo(logoBlackSvg, state.logoBlack)
                        ])
                        .then(() => {
                            state.logosLoaded = true;
                            requestRedraw(); // Redraw canvas once logos are ready
                        })
                        .catch(error => {
                            console.error("Error loading one or more logos from SVG source.", error);
                        });
                }

                // --- CORE DRAWING FUNCTIONS ---

                // Debounce redraw for performance
                let redrawTimeout;
                function requestRedraw() {
                    if (redrawTimeout) 
                        cancelAnimationFrame(redrawTimeout);
                    redrawTimeout = requestAnimationFrame(redrawCanvas);
                }

                function redrawCanvas() {
                    // Clear canvas
                    ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);

                    // Draw image or background color
                    if (state.image) {
                        drawCroppedImage(state.image);
                    } else {
                        ctx.fillStyle = 'rgb(233 80 12)';
                        ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
                    }

                    // Draw Text
                    drawText();

                    // Draw Logo
                    drawLogo();
                }

                function drawCroppedImage(img) {
                    const imgAspectRatio = img.width / img.height;
                    const canvasAspectRatio = CANVAS_WIDTH / CANVAS_HEIGHT;

                    let sx,
                        sy,
                        sWidth,
                        sHeight;

                    if (imgAspectRatio > canvasAspectRatio) { // Image is wider than canvas
                        sHeight = img.height;
                        sWidth = sHeight * canvasAspectRatio;
                        sx = (img.width - sWidth) / 2;
                        sy = 0;
                    } else { // Image is taller or square
                        sWidth = img.width;
                        sHeight = sWidth / canvasAspectRatio;
                        sx = 0;
                        sy = (img.height - sHeight) / 2;
                    }
                    ctx.drawImage(img, sx, sy, sWidth, sHeight, 0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
                }

                function drawText() {
                    if (!state.headingText && !state.bodyText) 
                        return;
                    
                    const PADDING = 60;
                    const HEADING_SIZE = 120;
                    const BODY_SIZE = 60;
                    const LINE_HEIGHT_MULTIPLIER = 1.4;

                    ctx.fillStyle = state.textColor;
                    ctx.textAlign = state.textAlign;
                    ctx.textBaseline = 'middle';

                    // Heading
                    ctx.font = `bold ${HEADING_SIZE}px "${state.font}"`;
                    const headingLines = wrapText(state.headingText, CANVAS_WIDTH - PADDING * 2);

                    // Body
                    ctx.font = `${BODY_SIZE}px "${state.font}"`;
                    const bodyLines = wrapText(state.bodyText, CANVAS_WIDTH - PADDING * 2);

                    const totalLines = headingLines.length + bodyLines.length;
                    const totalTextHeight = (headingLines.length * HEADING_SIZE * LINE_HEIGHT_MULTIPLIER) + (bodyLines.length * BODY_SIZE * LINE_HEIGHT_MULTIPLIER);

                    let currentY = state.textPos.y - totalTextHeight / 2;

                    // Draw heading lines
                    ctx.font = `bold ${HEADING_SIZE}px "${state.font}"`;
                    headingLines.forEach(line => {
                        ctx.fillText(line, state.textPos.x, currentY + HEADING_SIZE / 2);
                        currentY += HEADING_SIZE * LINE_HEIGHT_MULTIPLIER;
                    });

                    // Add a small gap between heading and body
                    if (headingLines.length > 0 && bodyLines.length > 0) {
                        currentY += BODY_SIZE * 0.5;
                    }

                    // Draw body lines
                    ctx.font = `${BODY_SIZE}px "${state.font}"`;
                    bodyLines.forEach(line => {
                        ctx.fillText(line, state.textPos.x, currentY + BODY_SIZE / 2);
                        currentY += BODY_SIZE * LINE_HEIGHT_MULTIPLIER;
                    });
                }

                function drawLogo() {
                    if (!state.logosLoaded) 
                        return; // Don't draw if logos haven't loaded
                    
                    const LOGO_HEIGHT = state.logoSize;

                    const selectedLogo = state.logoColor === '#FFFFFF'
                        ? state.logoWhite
                        : state.logoBlack;

                    // Maintain aspect ratio
                    const aspectRatio = selectedLogo.width / selectedLogo.height;
                    const logoWidth = LOGO_HEIGHT * aspectRatio;

                    const x = state.logoPos.x - logoWidth / 2;
                    const y = state.logoPos.y - LOGO_HEIGHT / 2;

                    ctx.drawImage(selectedLogo, x, y, logoWidth, LOGO_HEIGHT);
                }

                // --- EVENT HANDLERS ---
                function setupEventListeners() {
                    imageUpload.addEventListener('change', handleImageUpload);
                    clearImageBtn.addEventListener('click', handleClearImage);
                    resetLogoBtn.addEventListener('click', handleResetLogo);

                    headingInput.addEventListener('input', (e) => {
                        state.headingText = e.target.value;
                        requestRedraw();
                    });
                    bodyInput.addEventListener('input', (e) => {
                        state.bodyText = e.target.value;
                        requestRedraw();
                    });
                    fontSelect.addEventListener('change', handleFontChange);

                    logoSizeSlider.addEventListener('input', (e) => {
                        state.logoSize = parseInt(e.target.value, 10);
                        requestRedraw();
                    });

                    alignLeftBtn.addEventListener('click', () => updateAlignment('left'));
                    alignCenterBtn.addEventListener('click', () => updateAlignment('center'));
                    alignRightBtn.addEventListener('click', () => updateAlignment('right'));

                    centerTextBtn.addEventListener('click', () => {
                        state.textPos = {
                            x: CANVAS_WIDTH / 2,
                            y: CANVAS_HEIGHT / 2
                        };
                        requestRedraw();
                    });

                    // Color toggles
                    textWhiteBtn.addEventListener('click', () => updateColor('text', '#FFFFFF'));
                    textBlackBtn.addEventListener('click', () => updateColor('text', '#000000'));
                    logoWhiteBtn.addEventListener('click', () => updateColor('logo', '#FFFFFF'));
                    logoBlackBtn.addEventListener('click', () => updateColor('logo', '#000000'));

                    exportBtn.addEventListener('click', exportImage);

                    // Canvas dragging events
                    canvas.addEventListener('mousedown', handleDragStart);
                    canvas.addEventListener('mousemove', (e) => {
                        handleDragMove(e);
                        handleCursorChange(e);
                    });
                    canvas.addEventListener('mouseup', handleDragEnd);
                    canvas.addEventListener('mouseleave', (e) => {
                        handleDragEnd(e);
                        canvas.style.cursor = 'default'; // Reset cursor when mouse leaves
                    });

                    // Touch events for mobile
                    canvas.addEventListener('touchstart', handleDragStart);
                    canvas.addEventListener('touchmove', handleDragMove);
                    canvas.addEventListener('touchend', handleDragEnd);
                }

                function handleImageUpload(e) {
                    const file = e
                        .target
                        .files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (event) => {
                            const img = new Image();
                            img.onload = () => {
                                state.image = img;
                                requestRedraw();
                            };
                            img.src = event.target.result;
                        };
                        reader.readAsDataURL(file);
                    }
                }

                function handleClearImage() {
                    state.image = null;
                    imageUpload.value = ''; // Reset the file input
                    requestRedraw();
                }

                function handleResetLogo() {
                    state.logoPos = {
                        ...DEFAULT_LOGO_STATE.pos
                    };
                    state.logoSize = DEFAULT_LOGO_STATE.size;
                    logoSizeSlider.value = state.logoSize; // Update the slider UI
                    requestRedraw();
                }

                async function handleFontChange(e) {
                    const newFont = e.target.value;
                    fontLoader.style.display = 'flex';
                    try {
                        // This uses the Font Loading API to ensure the font is ready
                        await document
                            .fonts
                            .load(`1em "${newFont}"`);
                        state.font = newFont;
                    } catch (err) {
                        console.error('Failed to load font:', err);
                        // Fallback or notify user
                    } finally {
                        fontLoader.style.display = 'none';
                        requestRedraw();
                    }
                }

                function updateAlignment(alignment) {
                    state.textAlign = alignment;

                    alignLeftBtn.style.backgroundColor = alignment === 'left'
                        ? '#e5e7eb'
                        : 'white';
                    alignCenterBtn.style.backgroundColor = alignment === 'center'
                        ? '#e5e7eb'
                        : 'white';
                    alignRightBtn.style.backgroundColor = alignment === 'right'
                        ? '#e5e7eb'
                        : 'white';

                    requestRedraw();
                }

                function updateColor(type, color) {
                    if (type === 'text') {
                        state.textColor = color;
                        textWhiteBtn.style.backgroundColor = color === '#FFFFFF'
                            ? '#e5e7eb'
                            : 'white';
                        textBlackBtn.style.backgroundColor = color === '#000000'
                            ? '#1f2937'
                            : '#374151';
                    } else if (type === 'logo') {
                        state.logoColor = color;
                        logoWhiteBtn.style.backgroundColor = color === '#FFFFFF'
                            ? '#e5e7eb'
                            : 'white';
                        logoBlackBtn.style.backgroundColor = color === '#000000'
                            ? '#1f2937'
                            : '#374151';
                    }
                    requestRedraw();
                }

                function exportImage() {
                    const link = document.createElement('a');
                    link.download = 'instagram-post.png';
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                }

                // Drag and Drop Logic
                function getMousePos(evt) {
                    const rect = canvas.getBoundingClientRect();
                    const scaleX = canvas.width / rect.width;
                    const scaleY = canvas.height / rect.height;
                    const clientX = evt.touches
                        ? evt
                            .touches[0]
                            .clientX
                        : evt.clientX;
                    const clientY = evt.touches
                        ? evt
                            .touches[0]
                            .clientY
                        : evt.clientY;

                    return {
                        x: (clientX - rect.left) * scaleX,
                        y: (clientY - rect.top) * scaleY
                    };
                }

                function handleCursorChange(e) {
                    if (state.isDraggingText || state.isDraggingLogo) {
                        canvas.style.cursor = 'grabbing';
                        return;
                    }
                    const pos = getMousePos(e);
                    const textBounds = getTextBoundingBox();
                    const logoBounds = getLogoBoundingBox();

                    if (isPointInRect(pos, textBounds) || isPointInRect(pos, logoBounds)) {
                        canvas.style.cursor = 'grab';
                    } else {
                        canvas.style.cursor = 'default';
                    }
                }

                function handleDragStart(e) {
                    e.preventDefault();
                    const pos = getMousePos(e);
                    const textBounds = getTextBoundingBox();
                    const logoBounds = getLogoBoundingBox();

                    if (isPointInRect(pos, textBounds)) {
                        state.isDraggingText = true;
                        state.dragStart = {
                            x: pos.x - state.textPos.x,
                            y: pos.y - state.textPos.y
                        };
                    } else if (isPointInRect(pos, logoBounds)) {
                        state.isDraggingLogo = true;
                        state.dragStart = {
                            x: pos.x - state.logoPos.x,
                            y: pos.y - state.logoPos.y
                        };
                    }
                }

                function handleDragMove(e) {
                    if (!state.isDraggingText && !state.isDraggingLogo) 
                        return;
                    
                    e.preventDefault();
                    const pos = getMousePos(e);

                    if (state.isDraggingText) {
                        state.textPos = {
                            x: pos.x - state.dragStart.x,
                            y: pos.y - state.dragStart.y
                        };
                    } else if (state.isDraggingLogo) {
                        state.logoPos = {
                            x: pos.x - state.dragStart.x,
                            y: pos.y - state.dragStart.y
                        };
                    }
                    requestRedraw();
                }

                function handleDragEnd(e) {
                    e.preventDefault();
                    state.isDraggingText = false;
                    state.isDraggingLogo = false;
                    handleCursorChange(e); // Update cursor to 'grab' if still hovering
                }

                // --- UTILITY FUNCTIONS ---
                function updateUI() {
                    headingInput.value = state.headingText;
                    bodyInput.value = state.bodyText;
                    fontSelect.value = state.font;
                    logoSizeSlider.value = state.logoSize;
                    updateAlignment(state.textAlign);
                    updateColor('text', state.textColor);
                    updateColor('logo', state.logoColor);
                }

                function wrapText(text, maxWidth) {
                    if (!text) 
                        return [];
                    const words = text.split(' ');
                    const lines = [];
                    let currentLine = words[0];

                    for (let i = 1; i < words.length; i++) {
                        const word = words[i];
                        const width = ctx
                            .measureText(currentLine + " " + word)
                            .width;
                        if (width < maxWidth) {
                            currentLine += " " + word;
                        } else {
                            lines.push(currentLine);
                            currentLine = word;
                        }
                    }
                    lines.push(currentLine);
                    return lines;
                }

                function getTextBoundingBox() {
                    const PADDING = 60;
                    const HEADING_SIZE = 120;
                    const BODY_SIZE = 60;
                    const LINE_HEIGHT_MULTIPLIER = 1.4;

                    ctx.font = `bold ${HEADING_SIZE}px "${state.font}"`;
                    const headingLines = wrapText(state.headingText, CANVAS_WIDTH - PADDING * 2);

                    ctx.font = `${BODY_SIZE}px "${state.font}"`;
                    const bodyLines = wrapText(state.bodyText, CANVAS_WIDTH - PADDING * 2);

                    if (headingLines.length === 0 && bodyLines.length === 0) {
                        return {x: 0, y: 0, width: 0, height: 0};
                    }

                    let maxWidth = 0;
                    ctx.font = `bold ${HEADING_SIZE}px "${state.font}"`;
                    headingLines.forEach(line => {
                        const metrics = ctx.measureText(line);
                        if (metrics.width > maxWidth) 
                            maxWidth = metrics.width;
                        }
                    );

                    ctx.font = `${BODY_SIZE}px "${state.font}"`;
                    bodyLines.forEach(line => {
                        const metrics = ctx.measureText(line);
                        if (metrics.width > maxWidth) 
                            maxWidth = metrics.width;
                        }
                    );

                    const totalTextHeight = (headingLines.length * HEADING_SIZE * LINE_HEIGHT_MULTIPLIER) + (bodyLines.length * BODY_SIZE * LINE_HEIGHT_MULTIPLIER);

                    let x;
                    if (state.textAlign === 'left') {
                        x = state.textPos.x;
                    } else if (state.textAlign === 'center') {
                        x = state.textPos.x - maxWidth / 2;
                    } else { // right
                        x = state.textPos.x - maxWidth;
                    }

                    const y = state.textPos.y - totalTextHeight / 2;

                    return {x, y, width: maxWidth, height: totalTextHeight};
                }

                function getLogoBoundingBox() {
                    const LOGO_HEIGHT = state.logoSize;
                    const selectedLogo = state.logoColor === '#FFFFFF'
                        ? state.logoWhite
                        : state.logoBlack;
                    if (!selectedLogo.width || !selectedLogo.height) 
                        return {x: 0, y: 0, width: 0, height: 0};
                    const aspectRatio = selectedLogo.width / selectedLogo.height;
                    const logoWidth = LOGO_HEIGHT * aspectRatio;

                    const x = state.logoPos.x - logoWidth / 2;
                    const y = state.logoPos.y - LOGO_HEIGHT / 2;

                    return {x, y, width: logoWidth, height: LOGO_HEIGHT};
                }

                function isPointInRect(point, rect) {
                    return point.x >= rect.x && point.x <= rect.x + rect.width && point.y >= rect.y && point.y <= rect.y + rect.height;
                }

                // --- START THE APP ---
                init();
            });
        </script>
    </body>
</html>