<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basketball Game Planner</title>
    <link rel="stylesheet" href="resources/styles/game-planner.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Basketball Game Planner</h1>
            <div id="teamNameDisplay" class="team-name-display hidden"></div>
            <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark mode" title="Toggle dark mode">
                <span class="theme-icon"></span>
            </button>
        </header>

        <!-- Landing View -->
        <div id="landingView" class="view">
            <div class="landing-content">
                <div class="landing-hero">
                    <h2>Manage Your Team Rotation</h2>
                    <p>Plan fair playing time for 4-13 players per game</p>
                </div>
                
                <!-- Games List (shown when games exist) -->
                <div id="gamesListSection" class="games-list-section hidden">
                    <h3>Your Games</h3>
                    <div id="gamesList" class="games-list"></div>
                </div>
                
                <!-- Action Buttons -->
                <div class="landing-buttons">
                    <button id="manageTeamFromLanding" class="btn-secondary">Team Management</button>
                    <button id="goToSettingsFromLanding" class="btn-secondary">Settings</button>
                    <button id="newGameFromLanding" class="btn-primary btn-large">Create New Game</button>
                </div>
            </div>
        </div>

        <!-- Team Management View -->
        <div id="teamManagementView" class="view hidden">
            <div class="panel">
                <h2>Team Management</h2>
                <p class="team-info"><span id="rosterCount">0/25</span> players on roster, <span id="activeCount">0</span> active</p>
                
                <div class="form-group">
                    <label>Team Roster</label>
                    <div id="teamRoster" class="team-roster"></div>
                    <button id="addPlayerToRoster" class="btn-secondary btn-add">+ Add Player</button>
                    <p id="rosterValidationMessage" class="validation-message hidden"></p>
                </div>

                <div class="actions">
                    <button id="backFromTeamManagement" class="btn-secondary">Back</button>
                </div>
            </div>
        </div>

        <!-- Settings View -->
        <div id="settingsView" class="view hidden">
            <div class="panel">
                <h2>Settings</h2>
                
                <div class="form-group">
                    <label for="periodLength">Period Length (minutes)</label>
                    <input type="number" id="periodLength" min="1" max="60" value="5">
                    <p class="help-text">Default: 5 minutes per period</p>
                </div>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="timerSound">
                        Play sound when period ends
                    </label>
                </div>
                
                <div class="actions">
                    <button id="backFromSettings" class="btn-secondary">Back</button>
                </div>
            </div>
        </div>

        <!-- Game Creation View -->
        <div id="gameCreationView" class="view hidden">
            <div class="panel">
                <h2>Create New Game</h2>
                
                <div class="form-group">
                    <label for="gameOpponent">Opponent *</label>
                    <input type="text" id="gameOpponent" placeholder="e.g., Lakers">
                    <p class="help-text">Name of the team you're playing against</p>
                </div>
                
                <div class="form-group">
                    <label for="gameDate">Game Date</label>
                    <input type="date" id="gameDate">
                </div>
                
                <div class="form-group">
                    <label for="gameTime">Game Time</label>
                    <input type="time" id="gameTime">
                </div>
                
                <div class="form-group">
                    <label for="gameNotes">Notes</label>
                    <textarea id="gameNotes" rows="3" placeholder="Add any notes about this game (lineup changes, special instructions, etc.)"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Select Players for This Game *</label>
                    <p class="help-text">Choose which players will participate (4-13 players)</p>
                    <div id="gamePlayerSelection" class="player-selection"></div>
                    <p id="gameCreationValidation" class="validation-message hidden"></p>
                </div>
                
                <div class="actions">
                    <button id="backFromGameCreation" class="btn-secondary">Back</button>
                    <button id="createGameButton" class="btn-primary">Create Game</button>
                </div>
            </div>
        </div>

        <!-- Setup View -->
        <div id="setupView" class="view hidden">
            <div class="panel">
                <h2>Team Setup</h2>
                
                <div class="form-group">
                    <label for="teamName">Team Name (optional)</label>
                    <input type="text" id="teamName" placeholder="Enter your team name">
                </div>

                <div class="form-group">
                    <label>Players (4-13 required)</label>
                    <div id="playerInputs" class="player-inputs"></div>
                    <button id="addPlayer" class="btn-secondary btn-add">+ Add Player</button>
                    <p id="validationMessage" class="validation-message hidden"></p>
                </div>

                <div class="actions">
                    <button id="backToLanding" class="btn-secondary">Back</button>
                    <button id="startGame" class="btn-primary">Start Game</button>
                </div>
            </div>
        </div>

        <!-- Game View -->
        <div id="gameView" class="view hidden">
            <div class="game-controls panel">
                <button id="burgerMenu" class="burger-menu" aria-label="Toggle menu">â˜°</button>
                <div class="control-buttons" id="controlButtons">
                    <button id="goToTeamManagement" class="btn-secondary">Team Management</button>
                    <button id="goToSettings" class="btn-secondary">Settings</button>
                    <button id="reshuffleRotation" class="btn-warning">Reshuffle Rotation</button>
                    <button id="undoButton" class="btn-secondary" disabled>â†¶ Undo</button>
                    <button id="redoButton" class="btn-secondary" disabled>â†· Redo</button>
                    <button id="exportSchedule" class="btn-primary">Export/Print</button>
                    <button id="backToSetup" class="btn-secondary">Back to Landing</button>
                    <button id="clearData" class="btn-danger">Clear All</button>
                </div>
            </div>

            <!-- Game Header (for new multi-game structure) -->
            <div id="gameHeader" class="panel game-header hidden">
                <div class="game-header-content">
                    <div class="game-title-section">
                        <h2 id="currentGameTitle">Game</h2>
                        <div id="gameMetadata" class="game-metadata"></div>
                    </div>
                    <div class="game-selector-section">
                        <select id="gameSelector" class="game-selector">
                            <!-- Options populated by JS -->
                        </select>
                    </div>
                </div>
            </div>

            <!-- Period Timer -->
            <div id="periodTimerPanel" class="panel period-timer-panel hidden">
                <div class="period-timer-container">
                    
                    <!-- Home Team Scoreboard -->
                    <div class="scoreboard">
                        <div id="homeScoreLabel" class="scoreboard-label">Home</div>
                        <div class="scoreboard-controls">
                            <button id="homeScoreMinus" class="score-btn score-btn-minus">âˆ’</button>
                            <div id="homeScoreDisplay" class="score-display">0</div>
                            <button id="homeScorePlus" class="score-btn score-btn-plus">+</button>
                        </div>
                    </div>

                    <!-- Timer (center) -->
                    <div class="timer-section">
                        <div class="timer-display" id="timerDisplay">5:00</div>
                        <div class="timer-controls">
                            <button id="timerStartPause" class="timer-btn timer-btn-play" title="Start Timer">â–¶</button>
                            <button id="timerReset" class="timer-btn timer-btn-reset" title="Reset Timer">â†»</button>
                        </div>
                    </div>

                    <!-- Away Team Scoreboard -->
                    <div class="scoreboard">
                        <div id="awayScoreLabel" class="scoreboard-label">Away</div>
                        <div class="scoreboard-controls">
                            <button id="awayScoreMinus" class="score-btn score-btn-minus">âˆ’</button>
                            <div id="awayScoreDisplay" class="score-display">0</div>
                            <button id="awayScorePlus" class="score-btn score-btn-plus">+</button>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Player Status -->
            <div class="panel">
                <h3 id="playersHeader" class="accordion-header">
                    <span>Players</span>
                    <span class="accordion-icon">â–¼</span>
                </h3>
                <div id="playerStatus" class="player-status accordion-content"></div>
            </div>

            <!-- Game Rotation Table -->
            <div class="games-container">
                <div class="game-grid panel">
                    <div class="grid-wrapper">
                        <table id="gameTable" class="rotation-table"></table>
                    </div>
                </div>
            </div>

            <!-- Pairing Analytics & Fairness -->
            <div class="panel">
                <h3 class="accordion-header" id="analyticsAccordion">
                    <span>ðŸ“Š Analytics & Fairness</span>
                    <span class="accordion-icon">â–¼</span>
                </h3>
                <div class="accordion-content" id="analyticsContent">
                    <div id="pairingAnalytics" class="pairing-analytics"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Confirmation Modal -->
    <div id="customModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 id="modalTitle">Confirm Action</h3>
            <p id="modalMessage">Are you sure?</p>
            <div class="modal-actions">
                <button id="modalConfirm" class="btn-danger">Confirm</button>
                <button id="modalCancel" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Floating Action Buttons for Undo/Redo (Mobile) -->
    <div id="undoRedoFab" class="undo-redo-fab hidden">
        <button id="undoFab" class="fab-button" aria-label="Undo">
            <span>â†¶</span>
            <span class="fab-badge">0</span>
        </button>
        <button id="redoFab" class="fab-button" aria-label="Redo">
            <span>â†·</span>
        </button>
    </div>

    <script src="resources/scripts/draggable.bundle.js"></script>
    <script src="resources/scripts/game-planner.js"></script>
</body>
</html>
